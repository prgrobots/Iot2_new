# Session 17: AWS Industry Quest ‚Äì Manufacturing & Automotive (Week 3/3)

**Week:** 17  
**Element:** ICTIOT503 Element 3: Deploy complete IoT solution  
**Duration:** ~4‚Äì5 hours  
**Phase:** Capstone Integration (AWS Industry Quest: Manufacturing & Automotive ‚Äì Final)

---

## Session Introduction

**Week 17** is the final week of the **AWS Industry Quest: Manufacturing & Automotive**. You'll complete Labs 7‚Äì13 of the quest, covering the full manufacturing scenario, advanced vehicle telemetry, multi-truck predictive maintenance, and prepare your complete Capstone submission.

**By the end of Week 17:** You will have a **fully integrated IoT system** combining:
- Real ESP32 haul truck with sensors
- AWS IoT Core + Device Shadows
- SiteWise asset models
- QuickSight dashboard (Week 14)
- Digital twins in TwinMaker (Weeks 15‚Äì16)
- Predictive maintenance algorithms
- Pit station simulation interface
- Complete portfolio mapping to all performance criteria

## Learning Objectives

By the end of Week 17, you will be able to:

- Complete all AWS Industry Quest labs for manufacturing & automotive
- Integrate digital twins with predictive maintenance rules
- Demonstrate full end-to-end IoT system (truck ‚Üí cloud ‚Üí analytics ‚Üí pit station)
- Create professional documentation and video portfolio
- Prepare for final Capstone submission (Week 18)

---

## Session Structure

1. **AWS Industry Quest Labs 7‚Äì13** (final labs of the 13-hour quest)
   - Lab 7: Manufacturing scenario completeness
   - Lab 8‚Äì10: Vehicle telemetry deep dives
   - Lab 11‚Äì13: Multi-truck simulation and scaling

2. **Capstone Integration** ‚Äì Bring everything together
3. **Documentation** ‚Äì Portfolio mapping and technical architecture
4. **Video Preparation** ‚Äì 5-minute system walkthrough

---

## Pre-Session Preparation

!!! info "Completed by End of Week 16"
    - AWS Industry Quest Labs 1‚Äì6 complete
    - TwinMaker fleet scene with 3 trucks (real + simulated)
    - Anomaly detection rules implemented and tested
    - Lambda functions updating digital twins in real-time

!!! tip "System Health Check"
    - [ ] Real haul truck ESP32 publishing continuous MQTT telemetry
    - [ ] SiteWise asset "RockCore-Truck-01" linked to IoT Core
    - [ ] QuickSight dashboard showing live data (from Week 14)
    - [ ] TwinMaker scene displaying fleet with anomalies
    - [ ] GitHub repository with all code from Weeks 1‚Äì16

!!! warning "Week 18 is Submission Only"
    - No new content in Week 18
    - Week 18 = Final demo, portfolio review, and Capstone submission
    - **This week is your last chance to integrate everything**

---

## AWS Industry Quest Labs 7‚Äì13: Manufacturing Mastery

### Labs 7‚Äì10: Vehicle Telemetry & Manufacturing Context
**Combined Duration:** 2‚Äì2.5 hours

**Concepts Covered:**
- OPC-UA connectivity patterns (industrial protocols)
- Vehicle health metrics beyond sensors (firmware version, update status)
- Manufacturing-specific KPIs (trucks on-time delivery, maintenance costs, fuel efficiency)
- Historical data analysis for trend detection

**Your Task (Real-Hardware Extension):**

1. **Expand SiteWise Asset Model** for your truck:
   - Properties:
     - `engine_temperature` (from DHT11)
     - `vibration_level` (from GY-521)
     - `gas_ppm` (from MQ-2)
     - `cabin_lock_state` (from touch sensor)
   - Measurements (aggregated):
     - `daily_uptime_percentage` (manually calculated)
     - `predictive_maintenance_days_remaining` (computed)
     - `anomaly_events_this_shift` (count from rules)

2. **Update QuickSight Dashboard** (from Week 14) with new visualizations:
   - **KPI Card:** "Days Until Maintenance" (sourced from SiteWise)
   - **Time Series:** "Vibration Trend 30-Day" (highlight anomalies in red)
   - **Map:** Show truck location (simulated pit location)
   - **Table:** Recent anomaly events with timestamp and severity

3. **Implement Cross-Device Rules:**
   - If any truck's vibration anomaly detected ‚Üí trigger pit station alarm
   - Aggregate metrics across fleet (in Week 18, imagine 20 trucks)

### Labs 11‚Äì13: Multi-Truck Simulation & Scaling
**Duration:** 1.5‚Äì2 hours

**Concepts:**
- Scaling IoT workloads to fleet (1 ‚Üí 20 trucks)
- Simulating faults across multiple devices simultaneously
- Cost optimization and data routing strategies
- High-availability and failover patterns

**Your Task:**

1. **Scale TwinMaker Scene** from 3 to 5 simulated trucks (in addition to your real truck-01):
   - Truck-02: Normal operation
   - Truck-03: Degraded (trending toward failure)
   - Truck-04: Recent fault resolved, monitoring recovery
   - Truck-05: Simulated failure scenario (stopped, needs rescue)

2. **Pit Station LCD Simulation** (final software piece):
   - Create a simple **Node.js/Python web dashboard** or **HTML page** showing:
     - Live truck status grid (6 cells: 1 real + 5 simulated)
     - Color coding: Green (OK), Yellow (Warning), Red (Critical), Gray (Offline)
     - Click truck ‚Üí drill down to detailed metrics
     - Global KPIs: "Fleet Vibration Average", "Trucks in Maintenance Window"

   **Minimal Example (HTML):**

   ```html
   <!DOCTYPE html>
   <html>
   <head>
       <title>RockCore Pit Station Dashboard</title>
       <style>
           .truck-card { 
               width: 150px; 
               padding: 20px; 
               margin: 10px;
               border-radius: 8px;
               text-align: center;
               font-weight: bold;
           }
           .truck-ok { background: #4CAF50; color: white; }
           .truck-warning { background: #FFC107; color: black; }
           .truck-critical { background: #F44336; color: white; }
           .truck-offline { background: #999; color: white; }
       </style>
   </head>
   <body>
       <h1>RockCore Mining ‚Äì Pit Station Dashboard</h1>
       <div id="fleet-grid"></div>
       <script>
           const trucks = [
               { id: 'TC-01', status: 'ok', temp: 45, vib: 1.2, live: true },
               { id: 'TC-02', status: 'ok', temp: 48, vib: 1.5, live: false },
               { id: 'TC-03', status: 'warning', temp: 62, vib: 2.9, live: false },
               { id: 'TC-04', status: 'ok', temp: 42, vib: 0.8, live: false },
               { id: 'TC-05', status: 'critical', temp: 71, vib: 5.2, live: false }
           ];
           
           const grid = document.getElementById('fleet-grid');
           trucks.forEach(truck => {
               const statusClass = `truck-${truck.status}`;
               const badge = truck.live ? 'üü¢ LIVE' : '‚ö™ Simulated';
               grid.innerHTML += `
                   <div class="truck-card ${statusClass}">
                       <div>${truck.id}</div>
                       <div>${badge}</div>
                       <div>Temp: ${truck.temp}¬∞C</div>
                       <div>Vib: ${truck.vib}G</div>
                   </div>
               `;
           });
       </script>
   </body>
   </html>
   ```

3. **Integrate Dashboard with Real Data:**
   - Pit station page fetches truck status from **DynamoDB** (populated by IoT Rules)
   - Updates every 10 seconds
   - Clicking a truck tile shows detailed metrics from SiteWise/QuickSight

4. **Demonstrate Fleet Scenario:**
   - Run your **real truck** with one anomaly
   - Show pit station dashboard responding in real-time
   - Show other trucks' simulated data updating
   - Explain how this scales to 20+ trucks in production

---

## Capstone Integration Checklist

**By end of Week 17, verify all of the following are functional:**

### Hardware
- [ ] Real ESP32 haul truck powers on
- [ ] All sensors functional: temperature, vibration, gas, lock
- [ ] Connects to WiFi and publishes MQTT to AWS IoT Core
- [ ] Responds to OTA updates (change vibration threshold via shadow)

### AWS IoT Core & Cloud
- [ ] IoT Core Thing registered and certificates installed
- [ ] Device Shadow stores desired/reported state
- [ ] IoT Rules route messages to:
  - [ ] DynamoDB (for historical data)
  - [ ] SiteWise (for asset model)
  - [ ] SNS (for alerts)
  - [ ] Lambda (for TwinMaker updates)

### Analytics & Visualization
- [ ] SiteWise asset model complete with 6+ properties
- [ ] QuickSight dashboard displays 5+ visualizations with live data
- [ ] Anomaly alerts appear on dashboard within 30 seconds of sensor trigger

### Digital Twins
- [ ] TwinMaker scene displays 6 truck models (1 real + 5 simulated)
- [ ] Real truck data updates on digital model in real-time
- [ ] Anomalies trigger visual changes (color, overlays)
- [ ] Historical context shown (trend lines, maintenance countdown)

### Pit Station Simulation
- [ ] Web dashboard accessible (localhost or deployed)
- [ ] Shows 6-truck fleet grid with live status
- [ ] Real truck marked as "LIVE", others as "Simulated"
- [ ] Clicking truck shows detail view with metrics

### Documentation & Code
- [ ] GitHub repo contains all code (C++, Python, HTML/JS, CloudFormation)
- [ ] README.md explains system architecture
- [ ] Each folder labeled (arduino/, aws/, dashboard/, docs/)
- [ ] Comments in code explaining key functions

---

## Portfolio Mapping (A6 Evidence)

**Prepare these documents for Week 18 submission:**

### 1. Architecture Diagram
**Content:** Visual showing data flow:
```
Physical Truck ‚Üí MQTT ‚Üí IoT Core ‚Üí {Rules, Shadows, Alerts}
                                  ‚Üì
                        {SiteWise, DynamoDB, Lambda}
                                  ‚Üì
                        {QuickSight, TwinMaker}
                                  ‚Üì
                             Pit Station Dashboard
```
**Format:** Draw.io, Lucidchart, or Visio (export as PNG/PDF)

### 2. Unit Mapping Document
**Content:** Table mapping each system component to ICTIOT503 performance criteria

| Component | Functionality | Evidence | ICTIOT503 Criterion |
|-----------|---------------|----------|-------------------|
| ESP32 + Sensors | Real-time telemetry | Code + video | 1.1, 1.2 |
| IoT Core MQTT | Secure pub/sub | Certificates + rules screenshot | 1.3, 1.4 |
| Device Shadow | Offline sync | Video showing connectivity restore | 1.5, 2.1 |
| Anomaly Rules | Alert generation | Log output + dashboard | 2.2, 2.3 |
| Digital Twin | Visual monitoring | TwinMaker screenshot + video | 2.4 |
| Pit Station | Fleet command center | Dashboard video | 3.1, 3.2, 3.3 |

### 3. Technical Specifications (1‚Äì2 pages)
- **System Components:** List all hardware, software, AWS services
- **Data Flow:** Describe message routing through IoT Core and rules
- **Anomaly Detection Logic:** Explain thresholds and algorithms
- **Scaling Plan:** How would you add 20 trucks? (costs, architecture changes)

---

## Week 17 Deliverables

**Collect evidence for submission in Week 18:**

### Screenshots (5‚Äì10 total)
- [ ] Real truck publishing MQTT (AWS IoT console)
- [ ] SiteWise asset with 6+ properties
- [ ] QuickSight dashboard with 5+ visualizations
- [ ] TwinMaker scene with 6 trucks (anomaly triggering one)
- [ ] Pit station web dashboard grid view
- [ ] IoT Rules engine rule screenshot
- [ ] Lambda function code (code screenshot or GitHub)
- [ ] Device Shadow state (desired + reported)

### Code Files (in GitHub)
- [ ] `arduino/haul-truck-iot.ino` ‚Äì Full truck firmware
- [ ] `aws/iot-rules.json` ‚Äì All IoT Core rules
- [ ] `aws/lambda-twinmaker-update.py` ‚Äì TwinMaker updater
- [ ] `dashboard/pit-station.html` ‚Äì Dashboard HTML/CSS/JS
- [ ] `docs/ARCHITECTURE.md` ‚Äì System diagram + explanation
- [ ] `docs/UNIT_MAPPING.md` ‚Äì Performance criteria alignment

### Video (5 minutes) ‚Äì Prepared for Week 18 Submission
**Script:**
1. **Introduction (30 s):** "RockCore IoT System ‚Äì Integrated Fleet Monitoring"
2. **Hardware Demo (60 s):** Show real truck, sensors working, publish MQTT
3. **Cloud Integration (60 s):** AWS console: IoT Core, SiteWise, DynamoDB
4. **Analytics & Visualization (60 s):** QuickSight dashboard live data, trigger anomaly
5. **Digital Twins (60 s):** TwinMaker fleet scene responding to anomaly
6. **Pit Station (60 s):** Dashboard showing fleet status, drill down to individual truck

**Submission Method:** Upload MP4 to GitHub Releases or Google Drive (link in README)

---

## Troubleshooting & FAQs

**Q: I didn't complete all 13 hours of Industry Quest labs. What should I do?**  
A: Complete at least Labs 1‚Äì6 (essential concepts) by end of Week 17. Labs 7‚Äì13 deepen understanding but aren't strictly required for Capstone. A6 grading focuses on end-to-end system integration, not quest completion.

**Q: Can I submit Capstone without real truck hardware?**  
A: No. A6 requires at least one real ESP32 device publishing live telemetry. You can simulate other trucks, but the "real" truck is mandatory.

**Q: How much time should I spend on pit station web dashboard?**  
A: Minimal viable: 30 minutes (basic HTML grid). Enhanced: 1‚Äì2 hours (add charts, drill-down, real-time WebSocket updates). Aim for MVP by end of Week 17.

**Q: What if my TwinMaker scene has performance issues with 6 trucks?**  
A: Start with 3 trucks (1 real + 2 simulated). That's sufficient for A6. Document the scaling plan in your architecture doc.

---

## What Happens in Week 18

**Week 18 = Capstone Submission & Demo Only**

- No new AWS content
- Record final 5-minute system video
- Compile all deliverables into single submission package
- Submit to instructor (GitHub release or Blackboard)
- Optional: Live demo during instructor office hours

**Due by end of Week 18:** A6 Capstone submission (code + video + portfolio)

---

## Navigation

[‚Üê Week 16 (Industry Quest 2/3)](16.md) | [Course Overview](../overview.md) | [Capstone Integration ‚Üí](../capstone/integration.md)
